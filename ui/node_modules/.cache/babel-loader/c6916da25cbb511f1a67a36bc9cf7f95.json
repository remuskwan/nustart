{"ast":null,"code":"var _jsxFileName = \"/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/ProfilePage/passwordTab.js\",\n    _s = $RefreshSig$();\n\nimport { CheckCircleIcon, XCircleIcon } from \"@heroicons/react/solid\";\nimport { useEffect, useState } from \"react\";\nimport InputText from \"../../components/inputText\";\nimport api from \"../../util/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PasswordTab({\n  user\n}) {\n  _s();\n\n  const [password, setPassword] = useState('');\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  useEffect(() => {\n    async function getLoggedInUser() {\n      await api.getUser(user.id).then(response => setPassword(response.data.password)).then(() => console.log(password));\n    }\n\n    getLoggedInUser();\n  }, []);\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n\n    if (password === currentPassword) {\n      if (newPassword.match(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[@$!%*?&])[A-Za-z\\\\d@$!%*?&]{8,}$\")) {\n        if (newPassword === confirmPassword) {\n          //console.log(newPassword)\n          changePassword();\n        } else {\n          alert(\"Passwords do not match!\");\n        }\n      } else {\n        setError(\"Passwords must be minimum eight characters long and contain at least one uppercase letter, one lowercase letter, one number and one special character.\");\n      }\n    } else {\n      alert(\"Wrong current password!\");\n    }\n  };\n\n  async function changePassword() {\n    user.password = newPassword;\n    await api.editUser(user.id, user).then(response => console.log(response.data)).then(() => setMessage(\"Your password has been updated.\")).then(() => console.log(message));\n  }\n\n  return user && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-3 space-y-6 sm:pt-5 sm:space-y-5\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5 space-y-3 sm:space-y-5\",\n          children: [message && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md bg-green-50 p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0\",\n                children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n                  className: \"h-5 w-5 text-green-400\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-sm font-medium text-green-800\",\n                  children: \"Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 text-sm text-green-700\",\n                  children: message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 29\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rounded-md bg-red-50 p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0\",\n                children: /*#__PURE__*/_jsxDEV(XCircleIcon, {\n                  className: \"h-5 w-5 text-red-400\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-sm font-medium text-red-800\",\n                  children: \"Error\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 text-sm text-red-700\",\n                  children: error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\",\n              children: \"Current Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-1 sm:mt-0 sm:col-span-2 max-w-lg block w-full shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(InputText, {\n                type: \"password\",\n                name: \"password\",\n                id: \"password\",\n                required: true,\n                value: currentPassword,\n                onChange: e => setCurrentPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              className: \"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\",\n              children: \"New Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(InputText, {\n                type: \"password\",\n                name: \"newPassword\",\n                id: \"newPassword\",\n                required: true,\n                value: newPassword,\n                onChange: e => setNewPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"confirmPassword\",\n              className: \"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\",\n              children: \"Confirm Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-span-2 shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(InputText, {\n                type: \"password\",\n                name: \"confirmPassword\",\n                id: \"confirmPassword\",\n                required: true,\n                value: confirmPassword,\n                onChange: e => setConfirmPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\",\n                onClick: () => window.location.reload(),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-rose-600 hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PasswordTab, \"IcGDsgwg6Hug2mYK3fkIFapwULA=\");\n\n_c = PasswordTab;\n\nvar _c;\n\n$RefreshReg$(_c, \"PasswordTab\");","map":{"version":3,"sources":["/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/ProfilePage/passwordTab.js"],"names":["CheckCircleIcon","XCircleIcon","useEffect","useState","InputText","api","PasswordTab","user","password","setPassword","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","message","setMessage","error","setError","getLoggedInUser","getUser","id","then","response","data","console","log","handleSubmit","evt","preventDefault","match","changePassword","alert","editUser","e","target","value","window","location","reload"],"mappings":"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","sourcesContent":["import { CheckCircleIcon, XCircleIcon } from \"@heroicons/react/solid\"\nimport { useEffect, useState } from \"react\"\nimport InputText from \"../../components/inputText\"\nimport api from \"../../util/api\"\n\nexport default function PasswordTab({ user }) {\n\n    const [password, setPassword] = useState('')\n    const [currentPassword, setCurrentPassword] = useState('')\n    const [newPassword, setNewPassword] = useState('')\n    const [confirmPassword, setConfirmPassword] = useState('')\n    const [message, setMessage] = useState('')\n    const [error, setError] = useState('')\n\n    useEffect(() => {\n        async function getLoggedInUser() {\n            await api.getUser(user.id)\n                .then(response => setPassword(response.data.password))\n                .then(() => console.log(password))\n        }\n        getLoggedInUser()\n    }, [])\n\n    const handleSubmit = (evt) => {\n        evt.preventDefault()\n        if (password === currentPassword) {\n            if (newPassword.match(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[@$!%*?&])[A-Za-z\\\\d@$!%*?&]{8,}$\")) {\n                if (newPassword === confirmPassword) {\n                    //console.log(newPassword)\n                    changePassword()\n                } else {\n                    alert(\"Passwords do not match!\")\n                }\n            } else {\n                setError(\"Passwords must be minimum eight characters long and contain at least one uppercase letter, one lowercase letter, one number and one special character.\")\n            }\n        } else {\n            alert(\"Wrong current password!\")\n        }\n    }\n\n    async function changePassword() {\n        user.password = newPassword\n        await api.editUser(user.id, user)\n            .then(response => console.log(response.data))\n            .then(() => setMessage(\"Your password has been updated.\"))\n            .then(() => console.log(message))\n    }\n\n    return (\n        user &&\n        <div>\n            <div className=\"pt-3 space-y-6 sm:pt-5 sm:space-y-5\">\n                <form onSubmit={handleSubmit}>\n                    <div className=\"p-5 space-y-3 sm:space-y-5\">\n                        {message &&\n                            <div className=\"rounded-md bg-green-50 p-4\">\n                                <div className=\"flex\">\n                                    <div className=\"flex-shrink-0\">\n                                        <CheckCircleIcon className=\"h-5 w-5 text-green-400\" aria-hidden=\"true\" />\n                                    </div>\n                                    <div className=\"ml-3\">\n                                        <h3 className=\"text-sm font-medium text-green-800\">Success</h3>\n                                        <div className=\"mt-2 text-sm text-green-700\">\n                                            {message}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        {error &&\n                            <div className=\"rounded-md bg-red-50 p-4\">\n                                <div className=\"flex\">\n                                    <div className=\"flex-shrink-0\">\n                                        <XCircleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\n                                    </div>\n                                    <div className=\"ml-3\">\n                                        <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\n                                        <div className=\"mt-2 text-sm text-red-700\">\n                                            {error}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className=\"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start\">\n\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\">\n                                Current Password\n                            </label>\n                            <div className=\"mt-1 sm:mt-0 sm:col-span-2 max-w-lg block w-full shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md\">\n                                <InputText\n                                    type=\"password\"\n                                    name=\"password\"\n                                    id=\"password\"\n                                    required={true}\n                                    value={currentPassword}\n                                    onChange={(e) => setCurrentPassword(e.target.value)}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5\">\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\">\n                                New Password\n                            </label>\n                            <div className=\"col-span-2 shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md\">\n                                <InputText\n                                    type=\"password\"\n                                    name=\"newPassword\"\n                                    id=\"newPassword\"\n                                    required={true}\n                                    value={newPassword}\n                                    onChange={(e) => setNewPassword(e.target.value)}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5\">\n                            <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2\">\n                                Confirm Password\n                            </label>\n                            <div className=\"col-span-2 shadow-sm focus:ring-rose-500 focus:border-rose-500 sm:max-w-xs sm:text-sm rounded-md\">\n                                <InputText\n                                    type=\"password\"\n                                    name=\"confirmPassword\"\n                                    id=\"confirmPassword\"\n                                    required={true}\n                                    value={confirmPassword}\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"pt-5\">\n                            <div className=\"flex justify-end\">\n                                <button\n                                    type=\"button\"\n                                    className=\"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\"\n                                    onClick={() => window.location.reload()}\n                                >\n                                    Cancel\n                                </button>\n                                <button\n                                    type=\"submit\"\n                                    className=\"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-rose-600 hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\"\n                                >\n                                    Save\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}