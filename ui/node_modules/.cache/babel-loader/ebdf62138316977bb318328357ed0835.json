{"ast":null,"code":"var _jsxFileName = \"/Users/remuskwan/development/nus/is3106/project/ui/src/app/components/post/index.js\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { ThumbUpIcon } from '@heroicons/react/solid';\nimport PostOptions from \"../../containers/ThreadDetailsPage/postOptions\";\nimport api from \"../../util/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Post({\n  user,\n  setUser,\n  post,\n  forumId,\n  threadId,\n  setThread,\n  setPosts\n}) {\n  function toggleLike() {\n    // console.log(post.id)\n    let likedPosts = user.likedPosts;\n\n    if (likedPosts.includes(post.id)) {\n      likedPosts = [...likedPosts].filter(p => p != post.id);\n      post.likes = post.likes - 1;\n    } else {\n      likedPosts = [...likedPosts].push(post.id);\n      post.likes = post.likes + 1;\n    }\n\n    user.likedPosts = likedPosts;\n    api.editUser(user.id, user).then(response => {\n      setUser(response.data);\n    });\n    api.editPost(forumId, threadId, post).then(response => {\n      setThread(response.data);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"bg-white px-4 py-6 shadow sm:p-6 sm:rounded-lg\",\n    children: /*#__PURE__*/_jsxDEV(\"article\", {\n      \"aria-labelledby\": 'post-title-' + post.id,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: post.creator.profilePicture === \"default\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center items-center content-center bg-gradient-to-br from-rose-300 to-rose-600 shadow-md hover:shadow-lg h-10 w-10 rounded-full fill-current text-white\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xs\",\n                children: post.creator.username.substring(0, 1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"h-10 w-10 rounded-full\",\n              src: post.creator.profilePicture,\n              alt: post.creator.username.substring(0, 1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"min-w-0 flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium text-gray-900\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/profile/${post.creator.id}`,\n                className: \"hover:underline\",\n                children: post.creator.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: moment().subtract(moment().diff(post.createdAt.slice(0, -5))).calendar()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this), (post.creator.id === user.id || user.accountType === 'ADMIN') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 self-center flex\",\n            children: /*#__PURE__*/_jsxDEV(PostOptions, {\n              forumId: forumId,\n              threadId: threadId,\n              post: post,\n              setThread: setThread,\n              setPosts: setPosts\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          id: 'post-title-' + post.id,\n          className: \"mt-4 text-base font-medium text-gray-900\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: post.content\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, post.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/Users/remuskwan/development/nus/is3106/project/ui/src/app/components/post/index.js"],"names":["moment","Link","ThumbUpIcon","PostOptions","api","Post","user","setUser","post","forumId","threadId","setThread","setPosts","toggleLike","likedPosts","includes","id","filter","p","likes","push","editUser","then","response","data","editPost","creator","profilePicture","username","substring","subtract","diff","createdAt","slice","calendar","accountType","__html","content"],"mappings":"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","sourcesContent":["import moment from \"moment\"\nimport { Link } from \"react-router-dom\"\nimport {\n  ThumbUpIcon,\n} from '@heroicons/react/solid'\nimport PostOptions from \"../../containers/ThreadDetailsPage/postOptions\"\nimport api from \"../../util/api\"\n\nexport default function Post({ user, setUser, post, forumId, threadId, setThread, setPosts }) {\n  function toggleLike() {\n    // console.log(post.id)\n    let likedPosts = user.likedPosts\n    if (likedPosts.includes(post.id)) {\n      likedPosts = [...likedPosts].filter((p) => p != post.id)\n      post.likes = post.likes - 1\n    } else {\n      likedPosts = [...likedPosts].push(post.id)\n      post.likes = post.likes + 1\n    }\n    user.likedPosts = likedPosts\n    api.editUser(user.id, user)\n      .then((response) => {\n        setUser(response.data)\n      })\n    api.editPost(forumId, threadId, post)\n      .then((response) => {\n        setThread(response.data)\n      })\n  }\n  return (\n    <li key={post.id} className=\"bg-white px-4 py-6 shadow sm:p-6 sm:rounded-lg\">\n      <article aria-labelledby={'post-title-' + post.id}>\n        <div>\n          <div className=\"flex space-x-3\">\n            <div className=\"flex-shrink-0\">\n              {post.creator.profilePicture === \"default\"\n                ?\n                <div className=\"flex justify-center items-center content-center bg-gradient-to-br from-rose-300 to-rose-600 shadow-md hover:shadow-lg h-10 w-10 rounded-full fill-current text-white\">\n                  <h2 className=\"text-xs\">{post.creator.username.substring(0, 1)}</h2>\n                </div>\n                :\n                <img\n                  className=\"h-10 w-10 rounded-full\"\n                  src={post.creator.profilePicture}\n                  alt={post.creator.username.substring(0, 1)}\n                />\n              }\n            </div>\n            <div className=\"min-w-0 flex-1\">\n              <p className=\"text-sm font-medium text-gray-900\">\n                <Link to={`/profile/${post.creator.id}`} className=\"hover:underline\">\n                  {post.creator.username}\n                </Link>\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                {moment().subtract(moment().diff(post.createdAt.slice(0, -5))).calendar()}\n              </p>\n            </div>\n            {(post.creator.id === user.id || user.accountType === 'ADMIN') &&\n              <div className=\"flex-shrink-0 self-center flex\">\n                <PostOptions\n                  forumId={forumId}\n                  threadId={threadId}\n                  post={post}\n                  setThread={setThread}\n                  setPosts={setPosts}\n                />\n              </div>\n            }\n          </div>\n          <h2 id={'post-title-' + post.id} className=\"mt-4 text-base font-medium text-gray-900\">\n            <div dangerouslySetInnerHTML={{ __html: post.content }} />\n          </h2>\n        </div>\n\n        {/* <div className=\"mt-6 flex justify-between space-x-8\">\n          <div className=\"flex space-x-6\">\n            <span className=\"inline-flex items-center text-sm\">\n              <button\n                type=\"button\"\n                className=\"inline-flex space-x-2 text-gray-400 hover:text-gray-500\"\n                onClick={toggleLike}\n              >\n                <ThumbUpIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                <span className=\"font-medium text-gray-900\">{post.likes}</span>\n                <span className=\"sr-only\">likes</span>\n              </button>\n            </span>\n          </div>\n        </div> */}\n      </article>\n    </li>\n  )\n}"]},"metadata":{},"sourceType":"module"}