{"ast":null,"code":"var _jsxFileName = \"/Users/remuskwan/development/nus/is3106/project/ui/src/app/components/categoriesTable/index.js\",\n    _s = $RefreshSig$();\n\nimport moment from \"moment\";\nimport { Fragment, useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"../../util/api\";\nimport DeleteConfirm from \"../deleteConfirm\";\nimport DataTable from 'react-data-table-component';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CategoriesTable({\n  user,\n  items,\n  setSearchString,\n  dataLimit\n}) {\n  _s();\n\n  const [open, setOpen] = useState(false);\n  const [deleteCat, setDeleteCat] = useState(null);\n  const [editCat, setEditCat] = useState(null);\n  const [error, setError] = useState(null);\n  const [pages, setPages] = useState(Math.ceil(items.length / dataLimit));\n  const [currentPage, setCurrentPage] = useState(1);\n  const startIndex = currentPage * dataLimit - dataLimit;\n  const endIndex = startIndex + dataLimit;\n\n  const goToNextPage = () => setCurrentPage(page => page + 1);\n\n  const goToPreviousPage = () => setCurrentPage(page => page - 1);\n\n  const getPaginatedData = () => {\n    const startIndex = currentPage * dataLimit - dataLimit;\n    const endIndex = startIndex + dataLimit;\n    return items.slice(startIndex, endIndex);\n  };\n\n  function deleteCategory(categoryId) {\n    api.deleteCategory(categoryId).then(() => setSearchString(\"\")).catch(error => setError(error));\n  }\n\n  useEffect(() => {\n    setPages(Math.ceil(items.length / dataLimit));\n  }, [items.length, dataLimit]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\",\n          children: !items || !items.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"mt-2 text-sm font-medium text-gray-900\",\n              children: \"No categories\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(DataTable, {\n              columns: 4,\n              data: items,\n              highlightOnHover: true,\n              pagination: true,\n              paginationPerPage: 5,\n              paginationRowsPerPageOptions: [5, 10, 50],\n              sortable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), deleteCat && /*#__PURE__*/_jsxDEV(DeleteConfirm, {\n      title: \"category\",\n      open: open,\n      setOpen: setOpen,\n      cat: deleteCat,\n      onConfirm: deleteCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CategoriesTable, \"k5Nba8q/IfGEDqrguwbP8Upt56I=\");\n\n_c = CategoriesTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoriesTable\");","map":{"version":3,"sources":["/Users/remuskwan/development/nus/is3106/project/ui/src/app/components/categoriesTable/index.js"],"names":["moment","Fragment","useState","useEffect","Link","api","DeleteConfirm","DataTable","CategoriesTable","user","items","setSearchString","dataLimit","open","setOpen","deleteCat","setDeleteCat","editCat","setEditCat","error","setError","pages","setPages","Math","ceil","length","currentPage","setCurrentPage","startIndex","endIndex","goToNextPage","page","goToPreviousPage","getPaginatedData","slice","deleteCategory","categoryId","then","catch"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,QAAT,EAAmBC,QAAnB,EAA6BC,SAA7B,QAA8C,OAA9C;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,SAAP,MAAsB,4BAAtB;;AAEA,eAAe,SAASC,eAAT,CAAyB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,KAAR;AAAeC,EAAAA,eAAf;AAAgCC,EAAAA;AAAhC,CAAzB,EAAsE;AAAA;;AACnF,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACiB,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACmB,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAACqB,IAAI,CAACC,IAAL,CAAUd,KAAK,CAACe,MAAN,GAAeb,SAAzB,CAAD,CAAlC;AACA,QAAM,CAACc,WAAD,EAAcC,cAAd,IAAgCzB,QAAQ,CAAC,CAAD,CAA9C;AAEA,QAAM0B,UAAU,GAAGF,WAAW,GAAGd,SAAd,GAA0BA,SAA7C;AACA,QAAMiB,QAAQ,GAAGD,UAAU,GAAGhB,SAA9B;;AAEA,QAAMkB,YAAY,GAAG,MAAMH,cAAc,CAAEI,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAAzC;;AACA,QAAMC,gBAAgB,GAAG,MAAML,cAAc,CAAEI,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAA7C;;AAEA,QAAME,gBAAgB,GAAG,MAAM;AAC7B,UAAML,UAAU,GAAGF,WAAW,GAAGd,SAAd,GAA0BA,SAA7C;AACA,UAAMiB,QAAQ,GAAGD,UAAU,GAAGhB,SAA9B;AACA,WAAOF,KAAK,CAACwB,KAAN,CAAYN,UAAZ,EAAwBC,QAAxB,CAAP;AACD,GAJD;;AAMA,WAASM,cAAT,CAAwBC,UAAxB,EAAoC;AAClC/B,IAAAA,GAAG,CAAC8B,cAAJ,CAAmBC,UAAnB,EACGC,IADH,CACQ,MAAM1B,eAAe,CAAC,EAAD,CAD7B,EAEG2B,KAFH,CAESnB,KAAK,IAAIC,QAAQ,CAACD,KAAD,CAF1B;AAGD;;AAEDhB,EAAAA,SAAS,CAAC,MAAM;AACdmB,IAAAA,QAAQ,CAACC,IAAI,CAACC,IAAL,CAAUd,KAAK,CAACe,MAAN,GAAeb,SAAzB,CAAD,CAAR;AACD,GAFQ,EAEN,CAACF,KAAK,CAACe,MAAP,EAAeb,SAAf,CAFM,CAAT;AAIA,sBACE,QAAC,QAAD;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,yCAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,2DAAf;AAAA,oBACG,CAACF,KAAD,IAAU,CAACA,KAAK,CAACe,MAAjB,gBAEG;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,mCACE;AAAI,cAAA,SAAS,EAAC,wCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFH,gBAOG;AAAK,YAAA,SAAS,EAAC,+DAAf;AAAA,mCAqGE,QAAC,SAAD;AACE,cAAA,OAAO,EAAE,CADX;AAEE,cAAA,IAAI,EAAEf,KAFR;AAGE,cAAA,gBAAgB,MAHlB;AAIE,cAAA,UAAU,MAJZ;AAKE,cAAA,iBAAiB,EAAE,CALrB;AAKwB,cAAA,4BAA4B,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,CALtD;AAKmE,cAAA,QAAQ;AAL3E;AAAA;AAAA;AAAA;AAAA;AArGF;AAAA;AAAA;AAAA;AAAA;AARN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,EA4HGK,SAAS,iBACR,QAAC,aAAD;AACE,MAAA,KAAK,EAAC,UADR;AAEE,MAAA,IAAI,EAAEF,IAFR;AAGE,MAAA,OAAO,EAAEC,OAHX;AAIE,MAAA,GAAG,EAAEC,SAJP;AAKE,MAAA,SAAS,EAAEoB;AALb;AAAA;AAAA;AAAA;AAAA,YA7HJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmJD;;GAjLuB3B,e;;KAAAA,e","sourcesContent":["import moment from \"moment\";\nimport { Fragment, useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\";\nimport api from \"../../util/api\";\nimport DeleteConfirm from \"../deleteConfirm\";\nimport DataTable from 'react-data-table-component'\n\nexport default function CategoriesTable({ user, items, setSearchString, dataLimit }) {\n  const [open, setOpen] = useState(false)\n  const [deleteCat, setDeleteCat] = useState(null)\n  const [editCat, setEditCat] = useState(null)\n  const [error, setError] = useState(null);\n  const [pages, setPages] = useState(Math.ceil(items.length / dataLimit))\n  const [currentPage, setCurrentPage] = useState(1)\n\n  const startIndex = currentPage * dataLimit - dataLimit\n  const endIndex = startIndex + dataLimit\n\n  const goToNextPage = () => setCurrentPage((page) => page + 1)\n  const goToPreviousPage = () => setCurrentPage((page) => page - 1)\n\n  const getPaginatedData = () => {\n    const startIndex = currentPage * dataLimit - dataLimit\n    const endIndex = startIndex + dataLimit\n    return items.slice(startIndex, endIndex)\n  }\n\n  function deleteCategory(categoryId) {\n    api.deleteCategory(categoryId)\n      .then(() => setSearchString(\"\"))\n      .catch(error => setError(error))\n  }\n\n  useEffect(() => {\n    setPages(Math.ceil(items.length / dataLimit))\n  }, [items.length, dataLimit])\n\n  return (\n    <Fragment>\n      <div className=\"flex flex-col\">\n        <div className=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n          <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n            {!items || !items.length\n              ? (\n                <div className=\"text-center\">\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No categories</h3>\n                </div>\n              )\n              : (\n                <div className=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\">\n                  {/* <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Name\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Guides\n                        </th>\n                        <th\n                          scope=\"col\"\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                        >\n                          Created\n                        </th>\n                        <th scope=\"col\" className=\"relative px-6 py-3\">\n                          <span className=\"sr-only\">Edit</span>\n                        </th>\n                        <th scope=\"col\" className=\"relative px-6 py-3\">\n                          <span className=\"sr-only\">Delete</span>\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {getPaginatedData().map((item, itemIdx) => (\n                        <tr key={item.id} className={itemIdx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                            <Link to={`/profile/${item.id}`} className=\"hover:underline\">\n                              {item.name}\n                            </Link>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{item.guides.length}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {moment(item.created.slice(0, -5)).format(\"DD/MM/YY\")}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                            <button\n                              className=\"text-rose-600 hover:text-rose-900\"\n                              onClick={() => {\n                                setDeleteCat(item)\n                                setOpen(true)\n                              }}>\n                              Edit\n                            </button>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                            <button\n                              className=\"text-rose-600 hover:text-rose-900\"\n                              onClick={() => {\n                                setDeleteCat(item)\n                                setOpen(true)\n                              }}>\n                              Delete\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                    <tfoot className=\"bg-gray-50\">\n                      <tr>\n                        <td colSpan=\"6\">\n                          <nav\n                            className=\"overflow-hidden px-4 py-3 flex items-center justify-between sm:px-6\"\n                            aria-label=\"Pagination\"\n                          >\n                            <div className=\"hidden sm:block\">\n                              <p className=\"text-sm text-gray-700\">\n                                Showing <span className=\"font-medium\">{startIndex + 1}</span> to <span className=\"font-medium\">{items.length > endIndex ? (endIndex) : items.length}</span> of{' '}\n                                <span className=\"font-medium\">{items.length}</span> results\n                              </p>\n                            </div>\n                            <div className=\"flex-1 flex justify-between sm:justify-end\">\n                              {currentPage !== 1 &&\n                                <button\n                                  className=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n                                  onClick={goToPreviousPage}\n                                >\n                                  Previous\n                                </button>\n                              }\n                              {(currentPage !== pages && pages > 1) &&\n                                <button\n                                  className=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n                                  onClick={goToNextPage}\n                                >\n                                  Next\n                                </button>\n                              }\n                            </div>\n                          </nav>\n                        </td>\n                      </tr>\n                    </tfoot>\n                  </table> */}\n                  <DataTable\n                    columns={4}\n                    data={items}\n                    highlightOnHover\n                    pagination\n                    paginationPerPage={5} paginationRowsPerPageOptions={[5, 10, 50]} sortable\n                  />\n                </div>\n              )}\n          </div>\n        </div>\n      </div>\n      {deleteCat &&\n        <DeleteConfirm\n          title=\"category\"\n          open={open}\n          setOpen={setOpen}\n          cat={deleteCat}\n          onConfirm={deleteCategory}\n        />\n      }\n      {/* {editCat &&\n      <EditThreadModal\n      open={openEdit}\n      setOpen={setOpenEdit}\n      category={category}\n      setCategory={setCategory}\n      setNotifTitle={setNotifTitle}\n      triggerNotification={triggerNotification}\n    />\n        } */}\n\n    </Fragment>\n  )\n}"]},"metadata":{},"sourceType":"module"}