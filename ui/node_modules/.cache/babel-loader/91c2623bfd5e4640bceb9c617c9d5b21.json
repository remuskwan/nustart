{"ast":null,"code":"var _jsxFileName = \"/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/UsersPage/BlockTab.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { BanIcon, CheckCircleIcon } from '@heroicons/react/outline';\nimport SortSelectMenu from '../../components/SelectMenus/sortSelectMenu';\nimport api from '../../util/api';\nimport ThreadPaginator from '../../components/Paginator/threadPaginator';\nimport BlockUserList from './blockUserList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sortTypes = [{\n  id: 1,\n  name: 'Recent',\n  sortType: 'created',\n  reverse: false\n}, {\n  id: 2,\n  name: 'Email',\n  sortType: 'email',\n  reverse: true\n}, {\n  id: 2,\n  name: 'Username',\n  sortType: 'username',\n  reverse: true\n}, {\n  id: 2,\n  name: 'Role',\n  sortType: 'accountType',\n  reverse: true\n}, {\n  id: 2,\n  name: 'Status',\n  sortType: 'accountStatus',\n  reverse: true\n}];\nexport default function BlockTab({\n  searchString,\n  searchType\n}) {\n  _s();\n\n  const [allUsers, setAllUsers] = useState([]);\n  const [sortType, setSortType] = useState(sortTypes[0]);\n  useEffect(() => {\n    api.getUsers().then(response => {\n      const searchSortItems = (type, searchString, searchType) => {\n        const types = {\n          created: 'created',\n          accountType: 'accountType',\n          accountStatus: 'accountStatus',\n          email: 'email',\n          username: 'username'\n        };\n        const searchTypes = {\n          username: 'username',\n          email: 'email'\n        };\n        const sortProperty = types[type];\n        const searchProperty = searchTypes[searchType];\n        const filtered = [...response.data.filter(user => (user.accountStatus === 'ACTIVE' || user.accountStatus === 'BLOCKED') && user.accountType !== \"ADMIN\")].filter(user => {\n          if (searchString === '') {\n            return user;\n          } else if (user[searchProperty].toLowerCase().includes(searchString.toLowerCase())) {\n            return user;\n          }\n        });\n        const sorted = [...filtered].sort((x, y) => y[sortProperty].localeCompare(x[sortProperty]) || y['created'].localeCompare(x['created']));\n        setAllUsers(sorted);\n      };\n\n      searchSortItems(sortType.sortType, searchString, searchType.searchType); // setAllUsers(users.data.filter((user) => (user.accountStatus === 'ACTIVE' || user.accountStatus === 'BLOCKED') && user.accountType !== \"ADMIN\"));\n    });\n  }, [sortType.sortType, searchString, searchType.searchType]);\n\n  function toggleBlock(user) {\n    user.accountStatus = user.accountStatus === 'BLOCKED' ? 'ACTIVE' : 'BLOCKED';\n    api.editUser(user.id, user).then(() => {\n      api.getUsers().then(response => setAllUsers(response.data));\n    });\n  }\n\n  return allUsers && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-6 pb-4\",\n      children: /*#__PURE__*/_jsxDEV(SortSelectMenu, {\n        options: sortTypes,\n        sortType: sortType,\n        setSortType: setSortType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ThreadPaginator, {\n      data: allUsers,\n      component: BlockUserList,\n      dataLimit: 8,\n      toggleBlock: toggleBlock\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BlockTab, \"84QXRXfgiJrbzThkL/uPONtHVPI=\");\n\n_c = BlockTab;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlockTab\");","map":{"version":3,"sources":["/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/UsersPage/BlockTab.js"],"names":["useState","useEffect","BanIcon","CheckCircleIcon","SortSelectMenu","api","ThreadPaginator","BlockUserList","sortTypes","id","name","sortType","reverse","BlockTab","searchString","searchType","allUsers","setAllUsers","setSortType","getUsers","then","response","searchSortItems","type","types","created","accountType","accountStatus","email","username","searchTypes","sortProperty","searchProperty","filtered","data","filter","user","toLowerCase","includes","sorted","sort","x","y","localeCompare","toggleBlock","editUser"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport {\n    BanIcon,\n    CheckCircleIcon,\n} from '@heroicons/react/outline'\nimport SortSelectMenu from '../../components/SelectMenus/sortSelectMenu'\nimport api from '../../util/api'\nimport ThreadPaginator from '../../components/Paginator/threadPaginator'\nimport BlockUserList from './blockUserList'\n\nconst sortTypes = [\n    { id: 1, name: 'Recent', sortType: 'created', reverse: false },\n    { id: 2, name: 'Email', sortType: 'email', reverse: true },\n    { id: 2, name: 'Username', sortType: 'username', reverse: true },\n    { id: 2, name: 'Role', sortType: 'accountType', reverse: true },\n    { id: 2, name: 'Status', sortType: 'accountStatus', reverse: true },\n]\n\nexport default function BlockTab({ searchString, searchType }) {\n    const [allUsers, setAllUsers] = useState([])\n    const [sortType, setSortType] = useState(sortTypes[0])\n\n    useEffect(() => {\n        api.getUsers()\n            .then(response => {\n                const searchSortItems = (type, searchString, searchType) => {\n                    const types = {\n                        created: 'created',\n                        accountType: 'accountType',\n                        accountStatus: 'accountStatus',\n                        email: 'email',\n                        username: 'username',\n                    }\n                    const searchTypes = {\n                        username: 'username',\n                        email: 'email',\n                    }\n                    const sortProperty = types[type]\n                    const searchProperty = searchTypes[searchType]\n                    const filtered = [...response.data.filter((user) => (user.accountStatus === 'ACTIVE' || user.accountStatus === 'BLOCKED') && user.accountType !== \"ADMIN\")]\n                        .filter((user) => {\n                            if (searchString === '') {\n                                return user\n                            } else if (user[searchProperty].toLowerCase().includes(searchString.toLowerCase())) {\n                                return user\n                            }\n                        })\n                    const sorted = [...filtered]\n                        .sort((x, y) => y[sortProperty].localeCompare(x[sortProperty])\n                            || y['created'].localeCompare(x['created']))\n                    setAllUsers(sorted);\n                }\n                searchSortItems(sortType.sortType, searchString, searchType.searchType)\n                // setAllUsers(users.data.filter((user) => (user.accountStatus === 'ACTIVE' || user.accountStatus === 'BLOCKED') && user.accountType !== \"ADMIN\"));\n            })\n    }, [sortType.sortType, searchString, searchType.searchType])\n\n    function toggleBlock(user) {\n        user.accountStatus = user.accountStatus === 'BLOCKED' ? 'ACTIVE' : 'BLOCKED'\n        api.editUser(user.id, user)\n            .then(() => {\n                api.getUsers()\n                    .then((response) => setAllUsers(response.data))\n            })\n    }\n\n    return (\n        allUsers &&\n        <div>\n            <div className=\"pt-6 pb-4\">\n                <SortSelectMenu options={sortTypes} sortType={sortType} setSortType={setSortType} />\n            </div>\n            <ThreadPaginator\n                data={allUsers}\n                component={BlockUserList}\n                dataLimit={8}\n                toggleBlock={toggleBlock}\n            />\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}