{"ast":null,"code":"var _jsxFileName = \"/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/UsersPage/allUsersTab.js\",\n    _s = $RefreshSig$();\n\nimport { Fragment, useState, useEffect, useRef } from 'react';\nimport { Transition, Dialog } from '@headlessui/react';\nimport moment from 'moment';\nimport { CalendarIcon, ExclamationIcon } from '@heroicons/react/outline';\nimport api from '../../util/api';\nimport SortSelectMenu from '../../components/SelectMenus/sortSelectMenu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sortTypes = [{\n  id: 1,\n  name: 'Recent',\n  sortType: 'dateCreated',\n  reverse: false\n}, {\n  id: 2,\n  name: 'Title',\n  sortType: 'title',\n  reverse: true\n}];\nexport default function AllUsersTab({\n  searchString,\n  searchType\n}) {\n  _s();\n\n  const [allUsers, setAllUsers] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [sortType, setSortType] = useState(sortTypes[0]);\n  const cancelButtonRef = useRef(null);\n  useEffect(() => {\n    let isMounted = true;\n    api.getUsers().then(response => {\n      const searchSortItems = (type, searchString, searchType) => {\n        const types = {\n          created: 'created',\n          // role: 'isAdmin',\n          email: 'email',\n          username: 'username'\n        };\n        const searchTypes = {\n          username: 'username',\n          email: 'email'\n        };\n        const sortProperty = types[type];\n        const searchProperty = searchTypes[searchType];\n        const filtered = [...response.data].filter(user => {\n          if (searchString === '') {\n            return user;\n          } else if (user[searchProperty].toLowerCase().includes(searchString.toLowerCase())) {\n            return user;\n          }\n        });\n        const sorted = [...filtered].sort((x, y) => y[sortProperty].localeCompare(x[sortProperty]));\n        if (isMounted) setAllUsers(sorted); // add conditional check\n      };\n\n      searchSortItems(sortType.sortType, searchString, searchType.searchType);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [sortType.sortType, searchString, searchType.searchType]);\n\n  function ConfirmationDialog() {\n    return /*#__PURE__*/_jsxDEV(Transition.Root, {\n      show: open,\n      as: Fragment,\n      children: /*#__PURE__*/_jsxDEV(Dialog, {\n        as: \"div\",\n        className: \"fixed z-10 inset-0 overflow-y-auto\",\n        initialFocus: cancelButtonRef,\n        onClose: setOpen,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",\n          children: [/*#__PURE__*/_jsxDEV(Transition.Child, {\n            as: Fragment,\n            enter: \"ease-out duration-300\",\n            enterFrom: \"opacity-0\",\n            enterTo: \"opacity-100\",\n            leave: \"ease-in duration-200\",\n            leaveFrom: \"opacity-100\",\n            leaveTo: \"opacity-0\",\n            children: /*#__PURE__*/_jsxDEV(Dialog.Overlay, {\n              className: \"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hidden sm:inline-block sm:align-middle sm:h-screen\",\n            \"aria-hidden\": \"true\",\n            children: \"\\u200B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Transition.Child, {\n            as: Fragment,\n            enter: \"ease-out duration-300\",\n            enterFrom: \"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\",\n            enterTo: \"opacity-100 translate-y-0 sm:scale-100\",\n            leave: \"ease-in duration-200\",\n            leaveFrom: \"opacity-100 translate-y-0 sm:scale-100\",\n            leaveTo: \"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"sm:flex sm:items-start\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\",\n                    children: /*#__PURE__*/_jsxDEV(ExclamationIcon, {\n                      className: \"h-6 w-6 text-red-600\",\n                      \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 89,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 88,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\",\n                    children: [/*#__PURE__*/_jsxDEV(Dialog.Title, {\n                      as: \"h3\",\n                      className: \"text-lg leading-6 font-medium text-gray-900\",\n                      children: \"Deactivate account\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: \"Are you sure you want to deactivate your account? All of your data will be permanently removed. This action cannot be undone.\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 96,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 95,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm\",\n                  onClick: () => setOpen(false),\n                  children: \"Deactivate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\",\n                  onClick: () => setOpen(false),\n                  ref: cancelButtonRef,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this);\n  }\n\n  console.log(allUsers);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-6 pt-6 pb-4\",\n      children: /*#__PURE__*/_jsxDEV(SortSelectMenu, {\n        options: sortTypes,\n        sortType: sortType,\n        setSortType: setSortType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow overflow-hidden sm:rounded-md\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        role: \"list\",\n        className: \"divide-y divide-gray-200\",\n        children: allUsers.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-4 flex items-center sm:px-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"truncate\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex text-sm items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xl font-medium text-rose-500 truncate\",\n                    children: user.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"ml-3 flex-shrink-0 font-normal text-gray-500\",\n                    children: user.accountType\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 flex\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center text-sm text-gray-500\",\n                    children: [user.accountStatus, /*#__PURE__*/_jsxDEV(CalendarIcon, {\n                      className: \"ml-2 flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\",\n                      \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 49\n                    }, this), moment(user.created.slice(0, -5)).format('MMMM Do YYYY [at] h:mm a')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 flex-shrink-0 sm:mt-0 sm:ml-5\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex overflow-hidden -space-x-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-5 flex items-center\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialog, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 29\n          }, this)]\n        }, user.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AllUsersTab, \"iCYpxbEnuvdNRhR0IBXVktvU/XI=\");\n\n_c = AllUsersTab;\n\nvar _c;\n\n$RefreshReg$(_c, \"AllUsersTab\");","map":{"version":3,"sources":["/Users/remuskwan/development/nus/is3106/project/ui/src/app/containers/UsersPage/allUsersTab.js"],"names":["Fragment","useState","useEffect","useRef","Transition","Dialog","moment","CalendarIcon","ExclamationIcon","api","SortSelectMenu","sortTypes","id","name","sortType","reverse","AllUsersTab","searchString","searchType","allUsers","setAllUsers","open","setOpen","setSortType","cancelButtonRef","isMounted","getUsers","then","response","searchSortItems","type","types","created","email","username","searchTypes","sortProperty","searchProperty","filtered","data","filter","user","toLowerCase","includes","sorted","sort","x","y","localeCompare","ConfirmationDialog","console","log","map","accountType","accountStatus","slice","format"],"mappings":"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","sourcesContent":["import { Fragment, useState, useEffect, useRef } from 'react'\nimport { Transition, Dialog } from '@headlessui/react'\nimport moment from 'moment'\nimport {\n    CalendarIcon,\n    ExclamationIcon\n} from '@heroicons/react/outline'\nimport api from '../../util/api'\nimport SortSelectMenu from '../../components/SelectMenus/sortSelectMenu'\n\nconst sortTypes = [\n    { id: 1, name: 'Recent', sortType: 'dateCreated', reverse: false },\n    { id: 2, name: 'Title', sortType: 'title', reverse: true },\n  ]\n\nexport default function AllUsersTab({searchString, searchType}) {\n    const [allUsers, setAllUsers] = useState([])\n    const [open, setOpen] = useState(false)\n    const [sortType, setSortType] = useState(sortTypes[0])\n    const cancelButtonRef = useRef(null)\n\n    useEffect(() => {\n        let isMounted = true;\n        api.getUsers().then(response => {\n            const searchSortItems = (type, searchString, searchType) => {\n                const types = {\n                    created: 'created',\n                    // role: 'isAdmin',\n                    email: 'email',\n                    username: 'username',\n                }\n                const searchTypes = {\n                    username: 'username',\n                    email: 'email',\n                }\n                const sortProperty = types[type]\n                const searchProperty = searchTypes[searchType]\n                const filtered = [...response.data]\n                    .filter((user) => {\n                        if (searchString === '') {\n                            return user\n                        } else if (user[searchProperty].toLowerCase().includes(searchString.toLowerCase())) {\n                            return user\n                        }\n                    })\n                const sorted = [...filtered]\n                    .sort((x, y) => y[sortProperty].localeCompare(x[sortProperty]))\n                if (isMounted) setAllUsers(sorted);    // add conditional check\n            }\n            searchSortItems(sortType.sortType, searchString, searchType.searchType)\n        })\n        return () => { isMounted = false };\n    }, [sortType.sortType, searchString, searchType.searchType])\n\n    function ConfirmationDialog() {\n        return (\n            <Transition.Root show={open} as={Fragment}>\n                <Dialog as=\"div\" className=\"fixed z-10 inset-0 overflow-y-auto\" initialFocus={cancelButtonRef} onClose={setOpen}>\n                    <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n                        <Transition.Child\n                            as={Fragment}\n                            enter=\"ease-out duration-300\"\n                            enterFrom=\"opacity-0\"\n                            enterTo=\"opacity-100\"\n                            leave=\"ease-in duration-200\"\n                            leaveFrom=\"opacity-100\"\n                            leaveTo=\"opacity-0\"\n                        >\n                            <Dialog.Overlay className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\n                        </Transition.Child>\n\n                        {/* This element is to trick the browser into centering the modal contents. */}\n                        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">\n                            &#8203;\n                        </span>\n                        <Transition.Child\n                            as={Fragment}\n                            enter=\"ease-out duration-300\"\n                            enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                            enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leave=\"ease-in duration-200\"\n                            leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                        >\n                            <div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\n                                <div className=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n                                    <div className=\"sm:flex sm:items-start\">\n                                        <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\">\n                                            <ExclamationIcon className=\"h-6 w-6 text-red-600\" aria-hidden=\"true\" />\n                                        </div>\n                                        <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n                                            <Dialog.Title as=\"h3\" className=\"text-lg leading-6 font-medium text-gray-900\">\n                                                Deactivate account\n                                            </Dialog.Title>\n                                            <div className=\"mt-2\">\n                                                <p className=\"text-sm text-gray-500\">\n                                                    Are you sure you want to deactivate your account? All of your data will be permanently removed.\n                                                    This action cannot be undone.\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\n                                    <button\n                                        type=\"button\"\n                                        className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm\"\n                                        onClick={() => setOpen(false)}\n                                    >\n                                        Deactivate\n                                    </button>\n                                    <button\n                                        type=\"button\"\n                                        className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\n                                        onClick={() => setOpen(false)}\n                                        ref={cancelButtonRef}\n                                    >\n                                        Cancel\n                                    </button>\n                                </div>\n                            </div>\n                        </Transition.Child>\n                    </div>\n                </Dialog>\n            </Transition.Root>\n        )\n    }\n\n    console.log(allUsers)\n\n    return (\n        <div>\n            <div className=\"px-6 pt-6 pb-4\">\n                {/* <p className=\"mt-1 text-sm text-gray-600\">Search directory of {allUsers.length} users</p>\n                <form className=\"mt-6 flex space-x-4\" action=\"#\">\n                    <div className=\"flex-1 min-w-0\">\n                        <label htmlFor=\"search\" className=\"sr-only\">\n                            Search\n                        </label>\n                        <div className=\"relative rounded-md shadow-sm\">\n                            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                <SearchIcon className=\"h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                            </div>\n                            <input\n                                type=\"search\"\n                                name=\"search\"\n                                id=\"search\"\n                                className=\"focus:ring-pink-500 focus:border-pink-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md\"\n                                placeholder=\"Search\"\n                            />\n                        </div>\n                    </div>\n\n                </form> */}\n                <SortSelectMenu options={sortTypes} sortType={sortType} setSortType={setSortType} />\n            </div>\n            <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n                <ul role=\"list\" className=\"divide-y divide-gray-200\">\n                    {allUsers.map((user) => (\n                        <li key={user.id}>\n                            <div className=\"px-4 py-4 flex items-center sm:px-6\">\n                                <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\n                                    <div className=\"truncate\">\n                                        <div className=\"flex text-sm items-center\">\n                                            <p className=\"text-xl font-medium text-rose-500 truncate\">{user.email}</p>\n                                            <p className=\"ml-3 flex-shrink-0 font-normal text-gray-500\">{user.accountType}</p>\n                                        </div>\n                                        <div className=\"mt-2 flex\">\n                                            <div className=\"flex items-center text-sm text-gray-500\">\n                                                {user.accountStatus}\n                                                <CalendarIcon className=\"ml-2 flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400\" aria-hidden=\"true\" />\n                                                {moment(user.created.slice(0, -5)).format('MMMM Do YYYY [at] h:mm a')}  \n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"mt-4 flex-shrink-0 sm:mt-0 sm:ml-5\">\n                                        <div className=\"flex overflow-hidden -space-x-1\">\n\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"ml-5 flex items-center\">\n                                    {/* {user.accountStatus === \"BLOCKED\"\n                                        ?\n                                        <button\n                                            type=\"button\"\n                                            className=\"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\"\n                                        >\n                                            <CheckCircleIcon className=\"-ml-0.5 mr-2 h-4 w-4\" aria-hidden=\"true\" />\n                                            Unblock\n                                        </button>\n                                        :\n                                        <button\n                                            type=\"button\"\n                                            className=\"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-rose-500 hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500\"\n                                            onClick={() => setOpen(true)}\n                                        >\n                                            <BanIcon className=\"mr-3 h-4 w-4\" aria-hidden=\"true\"\n                                            />\n                                            Block\n                                        </button>\n\n                                    } */}\n                                    {/* <div>\n                                        <a\n                                            // href={`/profile/${user.id}`}\n                                            href='#'\n                                            className=\"ml-3 inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50\"\n                                            onClick={() => console.log(user.id)}\n                                        >\n                                            View\n                                        </a>\n                                    </div> */}\n                                </div>\n                            </div>\n                            <ConfirmationDialog />\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}